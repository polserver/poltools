<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Script
Types Reference</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><meta content="POL, EScript, documentation" name="keyword">
<meta content="Racalac, Rykard" name="Author"><style type="text/css">BODY {
FONT-WEIGHT: normal; FONT-SIZE: 8pt; COLOR: #000000; FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif
}
TD {
FONT-WEIGHT: normal; FONT-SIZE: 8pt; COLOR: #000000; FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif
}
P {
FONT-WEIGHT: normal; FONT-SIZE: 8pt; COLOR: #000000; FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif
}
</style></head>
<body style="background-color: rgb(240, 240, 240);"><p style="font-weight: bold; font-size: 14pt; text-align: left;">POL
Script Types </p>
<p style="font-weight: bold; font-size: 10pt; text-align: left;">This
is a list of all the different script types used in the POL system.
Some only pertain to specific objects, and/or specifc events, as
described. </p>
<hr><br>
<p style="font-weight: bold; font-size: 10pt; text-align: left;">Last
Modified: 6/19/2003<br></p>
<a name="AIScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">AIScript</th></tr></tbody> <tbody>
<tr> <th colspan="2" align="center">program
AIscript()</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">return value ignored</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Normal</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">1</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When an NPC is
created (either new or from world save on startup)</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/ai</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the NPC's npcdesc.cfg
entry, the 'Script' property defines the location of the AI script.
This is in package format ':pkgname:scriptname', or if just
'scriptname' in the same package, or /scripts/ai. Also, setting
npc.script allows you to change the script.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
acts as an NPC's control script, allowing it to move, fight, and react
to events. This script should not exit until the NPC dies, or the NPC
will become 'braindead'. Normally there exists a loop where events are
processed and other actions are performed.</td></tr> <tr>
<td colspan="2">This is the only script type where NPC.EM
functions are allowed.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>//Not a completely usable AI script, for example, doesn't close the distance to an opponent<br>// or react to other sysevents.<br>use uo;<br>use npc;<br>use os;<br>include "include/sysEvent";<br>var me;<br>program my_example_aicript()<br> var me := Self();<br> var event;<br> EnableEvents(SYSEVENT_SPEECH,5);<br> EnableEvents(SYSEVENT_ENGAGED);<br> while(me)<br> event := wait_for_event(15);<br> if(event)<br> case(event.type)<br> SYSEVENT_SPEECH: Say( event.source.name + " said: " + event.text );<br> SYSEVENT_ENGAGED: SetOpponent( event.source );<br> endcase<br> endif<br> Wander();<br> endwhile<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#NPC"><b>NPC</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#npcdesc.cfg"><b>npcdesc.cfg</b></a></td></tr></tbody></table><br><br><br>
<a name="AttackHitScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">AttackHitScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
attackhitscript(attacker, defender, weapon, armor, basedamage,
rawdamage )</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>attacker</var></td>
<td>Character Ref of player attacking with weapon</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>defender</var></td>
<td>Character Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>weapon</var></td> <td>Weapon
Ref</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>armor</var></td> <td>Armor
Ref, or 0 if no armor was hit.</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>basedamage</var></td>
<td>Integer damage amount due to random weapon damage, strength,
and tactics.</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>rawdamage</var></td>
<td>Integer damage amount due basedamage, minus amount absorbed
by armor.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">return value ignored</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Normal</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">100</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a weapon
with a hit script defined successfully hits an opponent. (note not
called automatically if Attack syshook is called)</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/items</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the NPC's npcdesc.cfg
entry, the 'AttackHitScript' property defines the location of the NPC's
intrinsic weapon hit script. This is in package format
':pkgname:scriptname', or if just 'scriptname' in the same package, or
/scripts/items.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
acts the same as a HitScript, but it is for an NPC's "intrinsic weapon"
which is a fake weapon for NPCs that attack with bare fists. See
HitScript and npcdesc.cfg.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
</tbody><tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Weapon"><b>Weapon</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#NPC"><b>NPC</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#npcdesc.cfg"><b>npcdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#HitScript"><b>HitScript</b></a></td></tr></tbody></table><br><br><br>
<a name="AuxServiceScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">AuxServiceScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
auxservice(connection)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>connection</var></td>
<td>Aux Connection Object</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored, exiting aux service script closes connection.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Normal</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">1</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a network
connection is created on the defined port in auxsvc.cfg.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">Define the 'Script' property
in auxsvc.cfg.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows a scripter to communicate with an external TCP/IP application,
using the normal POL packed string format for communcation.</td></tr>
<tr> <td colspan="2">wait_for_event allows packet
reads, with ev.type == "recv" and ev.value the unpacked data.</td></tr>
<tr> <td colspan="2">connection.transmit(unpacked
object) is the interface for sending data to the external application.</td></tr>
<tr> <td colspan="2">If you save the service script
PID to a global variable, other scripts may communicate with the
external application via your service script.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>//auxsvc.cfg:<br>AuxService<br>{<br> Port 5009<br> Script aux1<br>}<br>//aux1.src:<br>use uo;<br>use os;<br>program auxtest( connection )<br>	var ev;<br>	print( "aux service is running" );<br>	while (connection)<br>	ev := wait_for_event( 5 );<br>	if (ev)<br>	print(ev.value);<br>	endif<br>	endwhile<br>	print( "aux connection closed" );<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#AuxConnection"><b>AuxConnection</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#auxsvc.cfg"><b>auxsvc.cfg</b></a></td></tr></tbody></table><br><br><br>
<a name="boat.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">boat.ecl</th></tr></tbody> <tbody>
<tr> <th colspan="2" align="center">program
boatcontrol(boat)</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>boat</var></td>
<td>Boat Ref</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">Return value ignored</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Normal</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">1</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">Immediately
after the item is created (includes boot-up).</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in the boat.src file, only in /scripts/misc</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">Always called when a boat is
created/started.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
acts as a control script for a boat. Use it for navigation commands
(e.g. the tillerman control script), boat decay, etc.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>use os;<br>program my_example_boatscript(boat)<br> RegisterForSpeechEvents(boat.tillerman, 5);<br> var who;<br> while(boat) //exit loop if boat is destroyed<br> ev := wait_for_event(120);<br> if(ev)<br> who := ev.source;<br> PrintTextAbove(boat.tillerman, who.name + " is a scurvy dog for saying: " + ev.text);<br> endif<br> endwhile<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Boat"><b>Boat</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#ControlScript"><b>ControlScript</b></a></td></tr></tbody></table><br><br><br>
<a name="CanInsertScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">CanInsertScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
caninsertscript(character, container, movetype, inserttype,
adding_item, existing_stack, amount_to_add)</th></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character Ref, or uninitialized, see below</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>container</var></td>
<td>Container Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>movetype</var></td>
<td>integer</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>inserttype</var></td>
<td>integer</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>adding_item</var></td>
<td>Item Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>existing_stack</var></td>
<td>Item Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>amt_to_add</var></td>
<td>integer</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">If 1, item is allowed to be inserted into the
container, else it is not inserted.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Run To
Completion</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default
Priority</th></tr></tbody> <tbody> <tr>
<td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">While the item
is being moved into (or created in) a container, by user dragging,
script function, or the core.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/control</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the item's itemdesc.cfg
entry, the 'CanInsertScript' property defines the location of the can
insert script. This is in package format ':pkgname:scriptname', or if
just 'scriptname' in the same package, or /scripts/control.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows control over what items may be inserted into a container by
returning 1 or 0. This script is called fairly often, and is run
critical, so try not to do too many calculations in it.</td></tr>
<tr> <td colspan="2">IMPORTANT: the first parameter
(character) MAY be passed as an uninitialized object if the item was
not moved by character (i.e. by a script function or the core), so
please check it before you use it.</td></tr> <tr> <td colspan="2">inserttype will be INSERT_ADD_ITEM if a new item
is being inserted into the container (existing_stack and amt_to_add are
uninit), or INSERT_INCREASE_STACK if an existing item's amount is
merely being increased (note 'adding_item' can be uninit if one of the
CreateItem functions is merely adding to an existing stack, as opposed
to a client action)</td></tr> <tr> <td colspan="2">These are the times when canInsert scripts are
called: Client drag/drop, vendor buy: when moving items to the player's
backpack, vendor sell: when putting gold in the player's backpack,
secure trade, when cancelling or confirming a trade,
MoveItemToContainer, CreateItemInContainer, CreateItemInInventory,
CreateItemInBackpack.</td></tr> <tr> <td colspan="2">You should not destroy the adding_item in the
CanInsert script.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody>
<tbody> <tr> <td colspan="2"><pre>use uo;<br>program my_example_caninsertscript(character, container, item)<br> if(character != error)<br> if(character.weight &gt; 400)<br> return 0;<br> else<br> return 1;<br> endif<br> else<br> return 1;<br>endprogram</pre></td></tr>
<tr> <td colspan="2"><pre>UO.EM constants used with the 'movetype' parameter: <br>const MOVETYPE_PLAYER := 0; // physically moved (dragged) by a player<br>const MOVETYPE_COREMOVE := 1; // moved by the core (eg, MoveItemToContainer().)<br>Insert scripts only:<br>const MOVETYPE_CORECREATE := 2; // created by core (eg, CreateItemInBackpack().)</pre></td></tr>
<tr> <td colspan="2"><pre>UO.em constants used with the 'inserttype' parameter:<br>const INSERT_ADD_ITEM := 1;<br>const INSERT_INCREASE_STACK := 2;</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Container"><b>Container</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#OnInsertScript"><b>OnInsertScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#CanRemoveScript"><b>CanRemoveScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#OnRemoveScript"><b>OnRemoveScript</b></a></td></tr></tbody></table><br><br><br>
<a name="CanRemoveScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">CanRemoveScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
canremovescript(character, container, item, movetype)</th></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character Ref, or uninitialized, see below</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>container</var></td>
<td>Container Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>item</var></td> <td>Item
Ref</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>movetype</var></td> <td>Integer</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">If 1, item is
allowed to be removed from the container, else it is not removed.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Run To
Completion</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default
Priority</th></tr></tbody> <tbody> <tr>
<td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">While the item
is being moved out of a container, by user dragging, script function,
or the core.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where
Does It Live?</th></tr></tbody> <tbody> <tr>
<td colspan="2">The 'program' in a .src file, in a package
or /scripts/control</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To
Define</th></tr></tbody> <tbody> <tr> <td colspan="2">In the item's itemdesc.cfg entry, the
'CanRemoveScript' property defines the location of the can remove
script. This is in package format ':pkgname:scriptname', or if just
'scriptname' in the same package, or /scripts/control.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows control over what items may be removed from a container by
returning 1 or 0. This script is called fairly often, and is run
critical, so try not to do too many calculations in it.</td></tr>
<tr> <td colspan="2">IMPORTANT: the first parameter
(character) MAY be passed as an uninitialized object if the item was
not moved by character (i.e. by a script function or the core), so
please check it before you use it.</td></tr> <tr> <td colspan="2">You should not destroy the item in the CanRemove
script.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody>
<tbody> <tr> <td colspan="2"><pre>use uo;<br>program my_example_canremovescript(character, container, item)<br> var cursed := GetObjPropert(item,"cursed");<br> if(cursed == 1)<br> return 0;<br> else<br> return 1;<br>endprogram</pre></td></tr>
<tr> <td colspan="2"><pre>UO.EM constants used with the 'movetype' parameter: <br>const MOVETYPE_PLAYER := 0; // physically moved (dragged) by a player<br>const MOVETYPE_COREMOVE := 1; // moved by the core (eg, MoveItemToLocation().)</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Container"><b>Container</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#OnInsertScript"><b>OnInsertScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#CanInsertScript"><b>CanInsertScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#OnRemoveScript"><b>OnRemoveScript</b></a></td></tr></tbody></table><br><br><br>
<a name="chrdeath.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">chrdeath.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
chrdeath(corpse, ghost)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>corpse</var></td>
<td>Player corpse ref</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>ghost</var></td>
<td>Character Ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Normal</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">1</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When an Player
Character is killed.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in the chrdeath.src file, only in /scripts/misc (only one should exist
in the system)</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To
Define</th></tr></tbody> <tbody> <tr> <td colspan="2">This script is called for all Players.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows side effects to be triggered as a result of Player death, like
unmounting players off their mount, allowing ghosts to report their
murderer, Auto-Resurrect choices, etc.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program my_example_chrdeath(corpse,ghost)<br> Broadcast(ghost.name + "'s death cry is heard throughout the realm!");<br> //useful stuff here...<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Corpse"><b>Corpse</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#death.ecl"><b>death.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="ConsoleScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">ConsoleScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
consolescript(cmd)</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>cmd</var></td>
<td>command string, i.e. 'B'</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Normal</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">1</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a
character is entered into the POL Console, i.e. 'B'.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, only in /scripts/console</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">Map a command character to a
console script in /config/console.cfg</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows an administrator to activate POL scripts without needing to log
into the game. The scripts could be used to shut down theserver after a
time, or print a online character list, etc.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>There are four special command script names:<br>[lock] lock the console<br>[unlock] unlock the console<br>[lock/unlock] toggle the lock status of the console<br>[threadstatus] will display thread status and checkpoints</pre></td></tr>
<tr> <td colspan="2"><pre>// Print number of toplevel items in the world.<br>use uo;<br>program consolescript( cmd )<br> print( "System Message: Current # of Toplevel Items - " + polcore().itemcount );<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#console.cfg"><b>console.cfg</b></a></td></tr></tbody></table><br><br><br>
<a name="ControlScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">ControlScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
controlscript(item)</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>item</var></td>
<td>Item Ref</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">Return value ignored</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Normal</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">1</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">Immediately
after the item is created (includes boot-up).</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/control</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the item's itemdesc.cfg
entry, the 'ControlScript' property defines the location of the control
script. This is in package format ':pkgname:scriptname', or if just
'scriptname' in the same package, or /scripts/control.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script is
called when the item is created and stays attached to the item. Usually
control scripts do not exit until the item is destroyed (note, you must
handle this yourself). They generally use a loop to process events or
do some housecleaning after some sleeping, or wait_for_event.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>use os;<br>program my_example_controlscript(item)<br> RegisterForSpeechEvents(item, 5);<br> var who;<br> while(item) //exit loop if item is destroyed<br> ev := wait_for_event(120);<br> if(ev)<br> who := ev.source;<br> PrintTextAbove(item, who.name + " said: " + ev.text);<br> endif<br> endwhile<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#AIScript"><b>AIScript</b></a></td></tr></tbody></table><br><br><br>
<a name="CreateScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">CreateScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
createscript(item)</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>item</var></td>
<td>Item Ref</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">If 0, item is destroyed, else item is added to
the world.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Run To Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">While the item
is being created (via uo.em create item functions, or by the core).</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/control</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the item's itemdesc.cfg
entry, the 'CreateScript' property defines the location of the create
script. This is in package format ':pkgname:scriptname', or if just
'scriptname' in the same package, or /scripts/control.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script is
called when the item is created. Return 1 to allow the item to be
created, 0 to destroy the item.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program my_example_createscript(item)<br> if(item.x &gt;= 500 &amp;&amp; item.x &lt;= 600)<br> print("Item created in illegal location");<br> return 0;<br> endif<br> return 1;<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#DestroyScript"><b>DestroyScript</b></a></td></tr></tbody></table><br><br><br>
<a name="dblclickself.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">dblclickself.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
dblclickself(character)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Normal</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">100</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a player
character double clicks on himself or herself. Not called with the
"open paperdoll" client macro.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in dblclickself.src file, only in /scripts/misc</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">If the compiled file exists it
is automatically called on doubleclick.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows an alternate behavior other than the default 'open paperdoll'
behavior. Useful for things like dismounting.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>include "include/client";<br>program dblclickself( me )<br>	var mount := GetEquipmentByLayer( me, LAYER_MOUNT );<br>	if (!mount)<br>	OpenPaperdoll( me, me );<br>	return;<br>	endif<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody></table><br><br><br>
<a name="death.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">death.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
death(corpse)</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>corpse</var></td>
<td>NPC corpse ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Normal</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">1</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When an NPC is
killed.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where
Does It Live?</th></tr></tbody> <tbody> <tr>
<td colspan="2">The 'program' in the death.src file, only
in /scripts/misc (only one should exist in the system)</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">This script is called for all
NPCs.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows side effects to be triggered as a result of NPC death, like
unmounting players off their dying mount, playing death sounds, etc.</td></tr>
<tr> <td colspan="2">This script is common for all
NPCs, and is called for each.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program my_example_death(corpse)<br> PrintTextAbove(corpse,"ARRRRGH");<br> PlaySoundEffect(SFX_VICTORY); //fake constant<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Corpse"><b>Corpse</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#NPC"><b>NPC</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#npcdesc.cfg"><b>npcdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#chrdeath.ecl"><b>chrdeath.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="DestroyScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">DestroyScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
destroyscript(item)</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>item</var></td>
<td>Item Ref</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">If 1, item is allowed to be destroyed, else it
is not destroyed.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Run To Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">While the item
is being destroyed (UO.EM::DestroyItem() or core decay).</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/control</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the item's itemdesc.cfg
entry, the 'DestroyScript' property defines the location of the create
script. This is in package format ':pkgname:scriptname', or if just
'scriptname' in the same package, or /scripts/control.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script is
called while the item is being destroyed. Return 1 to allow the item to
be destroy, 0 to not allow destruction.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program my_example_destroyscript(item)<br> var gm_flag := GetObjProperty(item,"GM_FLAG");<br> if(gm_flag != error)<br> return 0;<br> else<br> return 1;<br> endif<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody></table><br><br><br>
<a name="EquipScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">EquipScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
equipscript(character, item, startup)</th></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character Ref, or uninitialized, see below</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>item</var></td>
<td>Item Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>startup</var></td> <td>Integer
0/1 if item is being equipped due to server start</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">1 if the item
should be equipped, 0 to disallow equipping.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Run To
Completion</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default
Priority</th></tr></tbody> <tbody> <tr>
<td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When the item
is being equipped on character, either by client dragging or script
function, after the equiptest.ecl check is passed.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/control</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the item's itemdesc.cfg
entry, the 'EquipScript' property defines the location of the equip
script. This is in package format ':pkgname:scriptname', or if just
'scriptname' in the same package, or /scripts/control. Also, setting
item.unequipscript allows you to change the script.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows side effects to be triggered as a result of the item being
equipped on a character.</td></tr> <tr> <td colspan="2">Also can be used to disallow equipping, by the
return value.</td></tr> <tr> <td colspan="2">Doesn't
make sense for items that cannot be equipped, like walls or doors and
such.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody>
<tbody> <tr> <td colspan="2"><pre>use uo;<br>const FOR_CLASS := "warrior";<br>program my_example_equipscript(character, item, startup)<br> var class := GetObjProperty(character, "class");<br> if(class != FOR_CLASS)<br> if(!startup)<br> SendSysmessage(character,"Your class may not equip that item.");<br> endif<br> return 0;<br> else<br> return 1;<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#UnEquipScript"><b>UnEquipScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#equiptest.ecl"><b>equiptest.ecl</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#unequiptest.ecl"><b>unequiptest.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="equiptest.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">equiptest.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
equiptest(character, item, startup)</th></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character Ref, or uninitialized, see below</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>item</var></td>
<td>Item Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>startup</var></td> <td>Integer
0/1 if item is being equiped on startup</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">1 if the item
can be equipped, 0 to disallow equipping.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Run To
Completion</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default
Priority</th></tr></tbody> <tbody> <tr>
<td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When the item
is being equipped by character, either by client dragging or script
function.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where
Does It Live?</th></tr></tbody> <tbody> <tr>
<td colspan="2">The 'program' in the equiptest.src file,
in a package or /scripts/misc (only one should exist in the system)</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2"></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows side effects to be triggered as a result of the item being
equipped by a character.</td></tr> <tr> <td colspan="2">This script is common for all items, and is
called for each. useful for equip checks that are the same for all
items, so the code does not need to be replicated in all EquipScripts.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program my_example_equiptest(character, item, startup)<br> var firstletter := lower(character.name[1]);<br> if(firstletter == "t")<br> SendSysmessage(character,"Sorry, character name starting with <br> 't' can't equip any items, for some reason.");<br> return 0;<br> else<br> return 1;<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#EquipScript"><b>EquipScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#UnEquipScript"><b>UnEquipScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#unequiptest.ecl"><b>unequiptest.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="ExportedVitalsFunction"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">ExportedVitalsFunction</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">exported
function vitalsfunc(character)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character Ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">Integer return
used by core, see below</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Run To
Completion</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default
Priority</th></tr></tbody> <tbody> <tr>
<td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">Both exported
functions on character create and when a script calls RecalcVitals()</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">As exported
functions in a .src, as defined in vitals.cfg.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">Define vitals functions in
vitals.cfg.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">There exists 2
exported functions for vitals calculation: RegenRateFunction and
MaximumFunction.</td></tr> <tr> <td colspan="2">Each
vital defined should have both of these functions. RegenRateFunction
should return the regeneration rate for that vital for that character
(see vitals.cfg for format)</td></tr> <tr> <td colspan="2">MaximumFunction should return the maximum vital
value for the character in hundreths of a point</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>//In a .src file, like regen.src:<br>//vitals.cfg defines MaximumFunction regen:GetLifeMaximumValueExported , etc.<br>//Life vital funcs:<br>use uo;<br>exported function GetLifeMaximumValueExported(mob) <br>	return (GetAttribute(mob, ATTRIBUTEID_STRENGTH) * 100);<br>endfunction</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#vitals.cfg"><b>vitals.cfg</b></a></td></tr></tbody></table><br><br><br>
<a name="help.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">help.ecl</th></tr></tbody> <tbody>
<tr> <th colspan="2" align="center">program
help(character)</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Normal</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">100</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a player
presses the "Help" button on the paperdoll.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in help.src file, only in /scripts/misc</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">Automatically called if file
exists.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
type handles help button on the paperdoll. Useful for implimenting a
help gump or staff paging system.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program help( character )<br> SendSysmessage(character,"You're helpless.");<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody></table><br><br><br>
<a name="HitScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">HitScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
hitscript(attacker, defender, weapon, armor, basedamage, rawdamage )</th></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>attacker</var></td>
<td>Character Ref of player attacking with weapon</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>defender</var></td>
<td>Character Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>weapon</var></td> <td>Weapon
Ref</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>armor</var></td> <td>Armor
Ref, or 0 if no armor was hit.</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>basedamage</var></td>
<td>Integer damage amount due to random weapon damage, strength,
and tactics.</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>rawdamage</var></td>
<td>Integer damage amount due basedamage, minus amount absorbed
by armor.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">return value ignored</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Normal</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">100</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a weapon
with a hit script defined successfully hits an opponent. (note not
called automatically if Attack syshook is called)</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/items</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the weapon's itemdesc.cfg
entry, the 'HitScript' property defines the location of the hit script.
This is in package format ':pkgname:scriptname', or if just
'scriptname' in the same package, or /scripts/control. Also, setting
weapon.hitscript allows you to change the script.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows the scripter to control damage dealt to a defender, equipment,
and to trigger extra effects like poisoned weapons.</td></tr>
<tr> <td colspan="2">Only one core-called hitscript
may be defined per weapon.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>use util;<br>program my_example_hitscript(attacker, defender, weapon, armor, basedamage, rawdamage)<br> ApplyDamage(defender,rawdamage);<br> if(RandomInt(20) == 2)<br> armor.hp := armor.hp - 1;<br> endif<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Weapon"><b>Weapon</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#OnHitScript"><b>OnHitScript</b></a></td></tr></tbody></table><br><br><br>
<a name="logoff.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">logoff.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
logoff(character)</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Run To Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">After the
linger time expires after a client logs off.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in logoff.src file, in /scripts/misc or any package</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">If the compiled file exists it
is automatically called.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows the scripter to run cleanup code after a character exits the
world. Useful for stuff like cleaning up summoned NPCs, etc.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program logoff( character )<br>	Broadcast(character.name + " exited the world." );<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#logon.ecl"><b>logon.ecl</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#reconnect.ecl"><b>reconnect.ecl</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#logofftest.ecl"><b>logofftest.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="logofftest.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">logofftest.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
logofftest(character)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">Integer value
returned is number of seconds to have the character 'linger' in the
world.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Run To Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a client
logs out.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where
Does It Live?</th></tr></tbody> <tbody> <tr>
<td colspan="2">The 'program' in logofftest.src file, only
in /scripts/misc</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To
Define</th></tr></tbody> <tbody> <tr> <td colspan="2">If the compiled file exists it is automatically
called.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows the scripter to control how long the character lingers in the
world after logoff.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody>
<tbody> <tr> <td colspan="2"><pre>use uo;<br>program logofftest( character )<br>	if(character.cmdlevel &gt; 0)<br>	return 0;<br>	else<br>	return 300;<br>	endif<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#logon.ecl"><b>logon.ecl</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#reconnect.ecl"><b>reconnect.ecl</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#logoff.ecl"><b>logoff.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="logon.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">logon.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
logon(character)</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Run To Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a client
logs into the game server.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in logon.src file, in /scripts/misc or any package</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">If the compiled file exists it
is automatically called.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows code to run when the player logs in. Can be used for welcome
messages, etc.</td></tr> <tr> <td colspan="2">This
script runs critical, so be careful how much code you run!</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program logon( character )<br>	SendSysmessage(character, "Welcome to POL.");<br>	Broadcast( character.name + " has entered the world.");<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#reconnect.ecl"><b>reconnect.ecl</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#logofftest.ecl"><b>logofftest.ecl</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#logoff.ecl"><b>logoff.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="MethodScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">MethodScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">exported
function methodname(params,...)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>item</var></td>
<td>Item Ref</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">core ignores return value, except for Install()
see below</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Install() Run To Completion, methods normal</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">Install()
critical, methods 1</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When
Is It Called?</th></tr></tbody> <tbody> <tr>
<td colspan="2">When a script calls the method for the
item, i.e. item.methodname()</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">In a .src file,
and MUST BE in a package.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the item's itemdesc.cfg
entry, the 'MethodScript' property defines the location of the create
script. This is in package format ':pkgname:scriptname', or if just
'scriptname' in the same package.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">Method Scripts
allow new object methods to be defined, and can override built-in
methods. For example, you may define a method door.wackymethod() or
override door.open().</td></tr> <tr> <td colspan="2">To enable the exported functions in the script,
the 'program' in the file must return 1. This is the 'Install()'
program that enables the exported methods.</td></tr> <tr>
<td colspan="2">The exported functions may take any number
of parameters</td></tr> <tr> <td colspan="2">To
instead call the built-in methods for an object, preceed the name with
an underscore '_'. So if you override door.close(), use door._close()
to instead call the built-in version.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>// This simple example shows how to override the door.open() method<br>pkg/.../door/itemdesc.cfg:<br>Door 0x0675<br>{<br> xmod -1<br> ymod +1<br> script door<br> doortype metal<br> MethodScript cdoor.ecl //note .ecl extension<br>}<br><br>pkg/.../door/cdoor.src:<br>exported function open( door )<br> print( "cdoor::open(" + door.serial + ")" );<br> return door._open();<br>endfunction<br><br>program install()<br> print( "installing cdoor" );<br> return 1;<br>endprogram</pre></td></tr>
<tr> <td colspan="2"><pre>// This example shows how to define your own methods<br>//pkg/.../mypkg/itemdesc.cfg:<br>Item 0xE000<br>{<br> //normal itemdesc.cfg entries, graphic, etc.<br> Name widget<br> MethodScript widget_methods.ecl<br>}<br><br>// pkg/.../mypkg/widget_methods.src:<br>program install()<br> print("installing widget");<br> return 1;<br>endprogram<br><br>exported function discombobulate(flag1, message) //pass by reference here is ok too!<br> if(flag1 &gt; 3)<br> print(message);<br> return 1;<br> endif<br> return 0;<br>endfunction<br><br>// So now, in another script, if 'widget' is a reference to <br>// item 0xE000, call like this:<br>widget.discombobulate(4,"Meaningless message");</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody></table><br><br><br>
<a name="oncreate.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">oncreate.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
oncreate(character, skillids)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>skillids</var></td>
<td>Array of the 3 integer skill IDs chosen.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Run To Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a new
player character is created.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in oncreate.src file, only in /scripts/misc</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">If the compiled file exists it
is automatically called.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows the scripter to run code when a new character is created. Useful
for giving out starting equipment, etc.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>include "include/startEqp";<br>program oncreate( character )<br>	CreateStartingEquipment(character, skillids);<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#ondelete.ecl"><b>ondelete.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="ondelete.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">ondelete.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
ondelete(character)</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Run To Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a player
character is deleted.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in ondelete.src file, in /scripts/misc or any package</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">If the compiled file exists it
is automatically called.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows the scripter to run code when a character is deleted.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program ondelete( character )<br>	Broadcast(character.name + " was deleted.");<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#oncreate.ecl"><b>oncreate.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="OnInsertScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">OnInsertScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
oninsertscript(character, container, movetype, inserttype, adding_item,
existing_stack, amount_to_add)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character Ref, or uninitialized, see below</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>container</var></td>
<td>Container Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>movetype</var></td>
<td>Integer</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>inserttype</var></td>
<td>Integer</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>adding_item</var></td>
<td>Item Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>existing_stack</var></td>
<td>Item Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>amount_to_add</var></td>
<td>Integer</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">return value ignored</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Run-To-Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">After the item
is moved into (or created in) a container, by user dragging, script
function, or the core.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/control</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the item's itemdesc.cfg
entry, the 'OnInsertScript' property defines the location of the
on-insert script. This is in package format ':pkgname:scriptname', or
if just 'scriptname' in the same package, or /scripts/control.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows side effects to be triggered as a result of the item insertion.</td></tr>
<tr> <td colspan="2">IMPORTANT: the first parameter
(character) MAY be passed as an uninitialized object if the item was
not moved by character (i.e. by a script function or the core), so
please check it before you use it.</td></tr> <tr> <td colspan="2">inserttype will be INSERT_ADD_ITEM if a new item
is being inserted into the container (existing_stack and amt_to_add are
uninit), or INSERT_INCREASE_STACK if an existing item's amount is
merely being increased (and adding_item is uninit).</td></tr>
<tr> <td colspan="2">These are the times when
onInsert scripts are called: Client drag/drop, vendor buy: when moving
items to the player's backpack, vendor sell: when putting gold in the
player's backpack, secure trade, when cancelling or confirming a trade,
MoveItemToContainer, CreateItemInContainer, CreateItemInInventory,
CreateItemInBackpack.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program my_example_oninsertscript(character, container, item, item_amount)<br> SendSysmessage(character,"You insert " + item_amount + " " <br> + item.desc + " into the container.");<br> PlaySoundEffectPrivate(character, SFX_BLAH, character);<br>endprogram</pre></td></tr>
<tr> <td colspan="2"><pre>UO.EM constants used with the 'movetype' parameter: <br>const MOVETYPE_PLAYER := 0; // physically moved (dragged) by a player<br>const MOVETYPE_COREMOVE := 1; // moved by the core (eg, MoveItemToContainer().)<br>Insert scripts only:<br>const MOVETYPE_CORECREATE := 2; // created by core (eg, CreateItemInBackpack().)</pre></td></tr>
<tr> <td colspan="2"><pre>UO.em constants used with the 'inserttype' parameter:<br>const INSERT_ADD_ITEM := 1;<br>const INSERT_INCREASE_STACK := 2;</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Container"><b>Container</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#CanInsertScript"><b>CanInsertScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#CanRemoveScript"><b>CanRemoveScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#OnRemoveScript"><b>OnRemoveScript</b></a></td></tr></tbody></table><br><br><br>
<a name="OnRemoveScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">OnRemoveScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
onremovescript(character, container, item, item_amount, movetype)</th></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character Ref, or uninitialized, see below</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>container</var></td>
<td>Container Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>item</var></td> <td>Item
Ref</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>item_amount</var></td> <td>Integer</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>movetype</var></td>
<td>Integer</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">return value ignored</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Run-To-Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">After the item
is out of a container, by user dragging, script function, or the core.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/control</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the item's itemdesc.cfg
entry, the 'OnRemoveScript' property defines the location of the
on-remove script. This is in package format ':pkgname:scriptname', or
if just 'scriptname' in the same package, or /scripts/control.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows side effects to be triggered as a result of the item removal.</td></tr>
<tr> <td colspan="2">IMPORTANT: the first parameter
(character) MAY be passed as an uninitialized object if the item was
not moved by character (i.e. by a script function or the core), so
please check it before you use it.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program my_example_onremovescript(character, container, item, item_amount)<br> SendSysmessage(character,"You removed " + item_amount + " " <br> + item.desc + " from the container.");<br> PlaySoundEffectPrivate(character, SFX_REMOVE, character);<br>endprogram</pre></td></tr>
<tr> <td colspan="2"><pre>UO.EM constants used with the 'movetype' parameter: <br>const MOVETYPE_PLAYER := 0; // physically moved (dragged) by a player<br>const MOVETYPE_COREMOVE := 1; // moved by the core (eg, MoveItemToLocation().)</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Container"><b>Container</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#CanInsertScript"><b>CanInsertScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#OnInsertScript"><b>OnInsertScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#CanRemoveScript"><b>CanRemoveScript</b></a></td></tr></tbody></table><br><br><br>
<a name="reconnect.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">reconnect.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
reconnect(character)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Run To Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a client
re-logs into the game server before his/her character is removed from
the world (5 minutes default).</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in reconnect.src file, in /scripts/misc or any package</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">If the compiled file exists it
is automatically called.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows code to run when the player logs in after having recently logged
off.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody>
<tbody> <tr> <td colspan="2"><pre>use uo;<br>program reconnect( character )<br>	Broadcast( character.name + " has reconnected.");<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#logon.ecl"><b>logon.ecl</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#logofftest.ecl"><b>logofftest.ecl</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#logoff.ecl"><b>logoff.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="SkillScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">SkillScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
skillscript(character)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Normal</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">100</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a uses a
"direct" skill like Hiding, Cartography, etc. (a blue 'crystal' appears
next to the skill name on the default skill scroll gump) Also called
with the client macros UseSkill, LastSkill, etc.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/skills</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">Define a "Script" property in
the skills.cfg entry for the appropriate skill number.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
type handles the directly-usable skills in UO. It is not used for
skills used via an item (like blacksmithy).</td></tr> <tr>
<td colspan="2">The script is 'attached' to the character,
and he/she cannot use another skill or use an item until this skill
script exits or calls Detach().</td></tr> <tr> <td colspan="2">The skills.cfg entry defines the time delay for
starting subsequent skill scripts</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>//example hide skill script <br>use uo;<br>program hideskill( character )<br>	if(character.cmdlevel &gt; 0)<br>	character.hidden := 1;<br>	else<br>	//obviously some skill checks go here, etc.<br>	endif<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#skills.cfg"><b>skills.cfg</b></a></td></tr></tbody></table><br><br><br>
<a name="skillwin.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">skillwin.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
skillwin(character)</th></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Normal</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">100</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a player
character requests the skills scroll gump to be displayed.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in skillwin.src file, only in /scripts/misc</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">If the compiled file exists it
is automatically called.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows an alternate behavior other than the default skills window
behavior. Useful for implimenting your own skills gump for your custom
shard.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody>
<tbody> <tr> <td colspan="2"><pre>use uo;<br>program skillwin( character )<br>	if(character.cmdlevel &gt; 0)<br>	SendSkillWindow( character, character );<br>	else<br>	SendMySkillGump( character );<br>	endif<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody></table><br><br><br>
<a name="SpellScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">SpellScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
spellscript(character)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Caster Character ref</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Normal</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">100</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a player
casts a spell from the normal UO spellbook.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/spells</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">Define a "Script" property in
the spells.cfg entry for the appropriate spell number.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
type handles the 'cast spell #' action in UO, via a spellbook or client
macro.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody>
<tbody> <tr> <td colspan="2"><pre>//example Lightning spell (#30), too simple to use directly!<br>use uo;<br>program lightning( character )<br>	var tgt := Target(character, TGTOPT_HARMFUL);<br>	if(tgt)<br>	if(tgt.isa(POLCLASS_MOBILE))<br>	PlayLightningBoltEffect(tgt);<br>	//some damage<br>	endif<br>	endif<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#spells.cfg"><b>spells.cfg</b></a></td></tr></tbody></table><br><br><br>
<a name="start.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">start.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">no
prototype, exists as inline code at global scope</th></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Run To Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">Once, during
server start.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where
Does It Live?</th></tr></tbody> <tbody> <tr>
<td colspan="2">As inline code outside any function scope
in start.src file, in any package and in /scripts</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">If the compiled file exists in
/scripts or an enabled package it is automatically called.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows the scripter to run code when the server starts, for
housekeeping or starting background scripts like NPC spawners.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>print("my package starting..");<br>//etc, your startup code! I'm so bad at examples.</pre></td></tr></tbody></table><br><br><br>
<a name="SyshookScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">SyshookScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">exported
function syshookname(params vary, see below)</th></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
usage varies, see below</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Run To
Completion</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default
Priority</th></tr></tbody> <tbody> <tr>
<td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">At various
times, depending on the syshook, see below.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">As exported
functions in a .src, as defined in syshook.cfg.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">Define a system hook script in
a syshook.cfg.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">The valid
system hook names are: CheckSkill, OpenSpellbook, GetBookPage,
CombatAdvancement, ParryAdvancement, Attack, Pushthrough</td></tr>
<tr> <td colspan="2">CheckSkill: params: CharRef
character, Int skillid, Int difficulty, Int pointvalue. When called:
UO.EM::CheckSkill() is called. Return: true/false for skill use success.</td></tr>
<tr> <td colspan="2">OpenSpellbook: params: CharRef
character. When called: A Character uses a spellbook object. Used to
override normal spellbook behavior.</td></tr> <tr> <td colspan="2">GetBookPage: not implimented</td></tr>
<tr> <td colspan="2">CombatAdvancement: params:
CharRef character, WeaponRef weapon, CharRef opponent. When called:
Whenever a character attacks another, before hit is determined. Used to
override normal combat skill advancement.</td></tr> <tr>
<td colspan="2">ParryAdvancement: params: CharRef
character, WeaponRef weapon, CharRef opponent, ItemRef opponent_shield.
When called: A Character attacks another whom wields a shield, before
parry success is determined. Used to override 'parry' skill advancement.</td></tr>
<tr> <td colspan="2">Attack: params: CharRef
character, CharRef opponent. When called: A Character attacks another.
IMPORTANT: completely overrides core handling of combat, including the
above advancement hooks. You must handle all of combat yourself in a
script if you use this hook (determining hits, applying damage,
destroying ammo, skill advancement, etc). Since it is called every
attack, this is a very CPU expensive hook to impliment.</td></tr>
<tr> <td colspan="2">Pushthrough: params: CharRef
character, Array of CharRefs in destination tile. When called: on EVERY
move of EVERY character. Return: true if walk ok, false to block walk.
Used to override core behavior for walking through tiles with other
mobiles on them. Since this critical script is called so often, it is a
very CPU expensive one to impliment.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>//Pushthrough hook example <br>//syshook.cfg defines: <br>SystemHookScript pushhook.ecl<br>{<br>	Pushthrough Pushthrough<br>}<br>//in pushhook.src:<br>use uo;<br>program PushthroughHook()<br>	return 1;<br>endprogram<br><br>exported function Pushthrough(walker, obstructors)<br>	//print(walker.name);<br>	//foreach mob in obstructors //note, obstructors is an array of char refs<br>	// print(mob.name);<br>	//endforeach<br>	<br>	if(GetVital(walker,"Stamina") &lt; GetVitalMaximumValue(walker,"Stamina"))<br>	return 0;<br>	else<br>	return ConsumeVital(walker,"Stamina",1000);<br>	endif<br>endfunction</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#syshook.cfg"><b>syshook.cfg</b></a></td></tr></tbody></table><br><br><br>
<a name="TextCommandScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">TextCommandScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
textcommand(character, text, uc_text, langcode)</th></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character ref activating this script</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>text</var></td>
<td>String after command name</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>uc_text</var></td>
<td>a Unicode array of the text string typed after the command
(exist if client used unicode speech)</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>langcode</var></td>
<td>3-character string, representing the client's language code,
i.e. 'ENU', 'DEU', 'RUS', etc.(exist if client used unicode speech)</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Normal</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">100</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a player
character 'speaks' a command string, i.e. '.online'</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a command level subdir of a package or
/scripts/textcmd</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To
Define</th></tr></tbody> <tbody> <tr> <td colspan="2">Place the script in a command level subdir or
/scripts/textcmd, or a package after defining the command level path in
cmds.cfg.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows a player to activate a script, according to their command level.
I.e. 'admin' level can activate admin and below (gm, seer, etc), but a
GM could not activate 'admin' commands.</td></tr> <tr>
<td colspan="2">Lots of things can be done with this
script type, including creating objects, destroying them, showing gump
menus, teleporting, or anything that the core functions allow!</td></tr>
<tr> <td colspan="2">'text' is all the text after
the command name. I.e. '.createstack 0xEED 100' would make 'text' be
'0xEED 100'. This is a great place to use SplitWords (note result is
still a string, so use Cint() if expecting integers).</td></tr>
<tr> <td colspan="2">Only one text command script
may be active on a player at a time.</td></tr> <tr> <td colspan="2">Unicode array: array of integers representing
unicode characters</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody>
<tbody> <tr> <td colspan="2"><pre>// a teleport script. Should be entered with x y z numbers after the name. <br>use uo;<br>program textcmd( character, text )<br> var arr := SplitWords( text );<br> MoveCharacterToLocation( character,Cint(arr[1]),Cint(arr[2]),Cint(arr[3]) );<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#cmds.cfg"><b>cmds.cfg</b></a></td></tr></tbody></table><br><br><br>
<a name="UnEquipScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">UnEquipScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
unequipscript(character, item)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character Ref, or uninitialized, see below</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>item</var></td>
<td>Item Ref</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">1 if the item should be unequipped, 0 to
disallow unequipping.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Run To
Completion</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default
Priority</th></tr></tbody> <tbody> <tr>
<td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When the item
is being unequipped by character, either by client dragging or script
function, after the unequiptest.ecl check is passed.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/control</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the item's itemdesc.cfg
entry, the 'UnEquipScript' property defines the location of the unequip
script. This is in package format ':pkgname:scriptname', or if just
'scriptname' in the same package, or /scripts/control. Also, setting
item.unequipscript allows you to change the script.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows side effects to be triggered as a result of the item being
unequipped by a character.</td></tr> <tr> <td colspan="2">Also can be used to disallow unequipping, by the
return value.</td></tr> <tr> <td colspan="2">Doesn't
make sense for items that cannot be equipped, like walls or doors and
such.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody>
<tbody> <tr> <td colspan="2"><pre>use uo;<br>program my_example_equipscript(character, item, startup)<br> var cursed := GetObjProperty(item, "cursed");<br> if(cursed == 1)<br> SendSysmessage(character,"That item is cursed! Gwuahahahaha!!");<br> return 0;<br> else<br> return 1;<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#UnEquipScript"><b>UnEquipScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#equiptest.ecl"><b>equiptest.ecl</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#unequiptest.ecl"><b>unequiptest.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="unequiptest.ecl"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">unequiptest.ecl</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
unequiptest(character, item, startup)</th></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character Ref, or uninitialized, see below</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>item</var></td>
<td>Item Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>startup</var></td> <td>always
false</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">1 if the item can be unequipped, 0 to disallow
unequipping.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Run To Completion</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">critical</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When the item
is being unequipped by character, either by client dragging or script
function.</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where
Does It Live?</th></tr></tbody> <tbody> <tr>
<td colspan="2">The 'program' in the unequiptest.src file,
in a package or /scripts/misc (only one should exist in the system)</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2"></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This script
allows side effects to be triggered as a result of the item being
unequipped by a character.</td></tr> <tr> <td colspan="2">This script is common for all items, and is
called for each. useful for unequip checks that are the same for all
items, so the code does not need to be replicated in all UnEquipScripts.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>program my_example_unequiptest(character, item, startup)<br> var cursed := GetObjProperty(item, "cursed");<br> if(cursed == 1)<br> SendSysmessage(character,"That item is cursed! Gwuahahahaha!!");<br> return 0;<br> else<br> return 1;<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Script Types</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="scripttypes.html#EquipScript"><b>EquipScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#UnEquipScript"><b>UnEquipScript</b></a></td></tr>
<tr> <td colspan="2"><a href="scripttypes.html#equiptest.ecl"><b>equiptest.ecl</b></a></td></tr></tbody></table><br><br><br>
<a name="UseScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">UseScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
usescript(character, item)</th></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>item</var></td> <td>Item
Ref</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return
values</th></tr></tbody> <tbody> <tr> <td colspan="2">Return value ignored</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler Type</th></tr></tbody>
<tbody> <tr> <td colspan="2">Normal</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">100</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a client
double clicks on an item with a defined use script.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/items</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the item's itemdesc.cfg
entry, the 'Script' property defines the location of the double-click
script. This is in package format ':pkgname:scriptname', or if just
'scriptname' in the same package, or /scripts/items. Also
item.usescript is writable in the same format.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This
interactive script is called when a client double clicks on an item.
This script is then attached to the character (meaning, no other script
may be attached to the character until this script exits or calls
Detach()). If the itemdesc.cfg entry also defines 'RequiresAttention 1'
then using that item will cause the player to unhide. </td></tr>
<tr> <td colspan="2">By default the player needs to
have line-of-sight to the item. Use the 'UseRequiresLOS' property in
the itemdesc.cfg entry to change this per-item template.</td></tr>
<tr> <td colspan="2">By default ghosts may not use
items. Use the 'GhostsCanUse' property in the itemdesc.cfg entry to
change this per-item template.</td></tr> <tr> <td colspan="2">The default maximum distance away from the item
to use it is 2 or the defined 'DefaultDoubleclickRange' in
servspecopt.cfg. To override this, use the 'DoubleclickRange' property
in the itemdesc.cfg entry to change this per-item template.</td></tr>
<tr> <td colspan="2">Can be used to override the
default double-click behaviors of Containers, Maps, etc.</td></tr>
<tr> <td colspan="2">Doesn't work with Multis.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>use util;<br>program my_example_usescript(character, item)<br> PrintTextAbove(item, character.name + " used me!");<br> item.color := RandomInt(50);<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr>
<tr> <td colspan="2"><a href="configfiles.html#servspecopt.cfg"><b>servspecopt.cfg</b></a></td></tr></tbody></table><br><br><br>
<a name="WalkOnScript"> </a><table align="center" bgcolor="#dddddd" border="1" cellpadding="1" cellspacing="0" frame="box" rules="groups" width="75%"> <tbody> <tr><th colspan="2" align="center">WalkOnScript</th></tr></tbody>
<tbody> <tr> <th colspan="2" align="center">program
walkonscript(character, item, lastx, lasty, lastz)</th></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Parameters:</th></tr></tbody>
<tbody> <tr bgcolor="#d4d4d4"> <td>Name</td>
<td>Type</td></tr></tbody> <tbody> <tr bgcolor="#e4e4e4"> <td width="50%"><var>character</var></td>
<td>Character Ref</td></tr> <tr bgcolor="#e4e4e4">
<td width="50%"><var>item</var></td> <td>Item
Ref</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>lastx</var></td> <td>Character's
previous integer world coordinate</td></tr> <tr bgcolor="#e4e4e4"> <td width="50%"><var>lasty</var></td>
<td>Character's previous integer world coordinate</td></tr>
<tr bgcolor="#e4e4e4"> <td width="50%"><var>lastz</var></td>
<td>Character's previous integer world coordinate</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Return values</th></tr></tbody>
<tbody> <tr> <td colspan="2">Return value
ignored</td></tr></tbody> <tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Scheduler
Type</th></tr></tbody> <tbody> <tr> <td colspan="2">Normal</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Default Priority</th></tr></tbody>
<tbody> <tr> <td colspan="2">100</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">When Is It Called?</th></tr></tbody>
<tbody> <tr> <td colspan="2">When a
character moves onto this item.</td></tr></tbody> <tbody>
<tr bgcolor="#cccccc"> <th colspan="2" align="left">Where Does It Live?</th></tr></tbody>
<tbody> <tr> <td colspan="2">The 'program'
in a .src file, in a package or /scripts/items</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">To Define</th></tr></tbody> <tbody>
<tr> <td colspan="2">In the item's itemdesc.cfg
entry, the 'WalkOnScript' property defines the location of the walk-on
script. This is in package format ':pkgname:scriptname', or if just
'scriptname' in the same package, or /scripts/items.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Explanation</th></tr></tbody>
<tbody> <tr> <td colspan="2">This
interactive script is called when a client moves on an item (walk or
teleports). This script is NOT attached to the character.</td></tr>
<tr> <td colspan="2">Doesn't work with Multis.</td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Examples</th></tr></tbody> <tbody>
<tr> <td colspan="2"><pre>use uo;<br>use util;<br>program my_example_walkonscript(character, item, lastx, lasty, lastz)<br> PrintTextAbove(item, "Ouch! " + character.name + ", don't step on me!");<br> MoveItemToLocation( item, lastx, lasty, lastz );<br>endprogram</pre></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Objects</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="objref.html#Character"><b>Character</b></a></td></tr>
<tr> <td colspan="2"><a href="objref.html#Item"><b>Item</b></a></td></tr></tbody>
<tbody> <tr bgcolor="#cccccc"> <th colspan="2" align="left">Related Config Files</th></tr></tbody>
<tbody> <tr> <td colspan="2"><a href="configfiles.html#itemdesc.cfg"><b>itemdesc.cfg</b></a></td></tr></tbody></table><br><br><br>
<hr><p style="font-weight: bold; font-size: 9pt; text-align: center;">If
you know if any information is incorrect on these pages, mail your
corrections to racalac@burdell.org </p>
<p style="font-weight: bold; font-size: 7pt; text-align: center;">Copyright
2003 David Carpman, all rights reserved. DO NOT REPRODUCE, MIRROR,
ALTER, SPINDLE, MUTILATE, OR SIT ON. </p></body></html>